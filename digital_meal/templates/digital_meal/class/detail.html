{% extends "digital_meal/base.html" %}

{% block title %}Klassenübersicht "{{ object.name }}"{% endblock title %}

{% block main_content %}

<h1 class="mb-3">Klasse "{{ object.name }}"</h1>

<div class="row">

  <div class="col m-3 p-3 background-green">
    <h4>Übersicht</h4>

    <table>
      <tbody>
      <tr>
        <td class="pe-5">Klassenbezeichnung:</td>
        <td>{{ object.name }}</td>
      </tr>
      <tr>
        <td>Erstellt am:</td>
        <td>{{ object.date_created }}</td>
      </tr>
      <tr>
        <td>Schulstufe:</td>
        <td>{{ object.get_school_level_display }}</td>
      </tr>
      <tr>
        <td>Schuljahr:</td>
        <td>{{ object.school_year }}</td>
      </tr>
      <tr>
        <td>Unterrichtsfach:</td>
        <td>{{ object.get_subject_display }}</td>
      </tr>
      <tr>
        <td>Unterrichtsformat:</td>
        <td>{{ object.get_instruction_format_display }}</td>
      </tr>
      </tbody>
    </table>

  </div>

  <div class="col m-3 p-3 background-red">
    <h4>Materialien</h4>

    <p>Hier finden Sie alle Materialien, die zum ausgewählten Modul "YouTube" gehören.</p>

    <ul>
      <li>Handbuch</li>
      <li>Arbeitsblätter</li>
      <li>Fact-Sheet</li>
      <li>Foliensätze</li>
    </ul>
  </div>
</div>

<div class="mt-4 row">
  <h3>Teilnahme</h3>

  <div class="col m-3 p-3 background-yellow">
    <h4>Test-Teilnahme</h4>
    <p>
      Mit dem Testlink können Sie den Fragebogen und die Datenspende ausprobieren.
      Am besten öffnen Sie den Link in einem privaten Fenster, ansonsten können Sie den Testdurchlauf nur einmal durchführen.
      Ihre Antworten und Daten, die Sie im Testdurchlauf geben bzw. hochladen werden automatisch am Ende eines Tages gelöscht und fliessen
      nicht in die Klassenauswertung mit ein.
    </p>

    <p><a href="{{ object.track.ddm_path }}?class=testlink" target="_blank"><button class="orange-button">Test-Teilnahme >></button></a></p>
  </div>

  <div class="col m-3 p-3 background-orange">
    <h4>Link für Schüler:innen</h4>

    Alle Antworten und Daten, die über diesen Link gegeben bzw. hochgeladen werden fliessen in die Klassenauswertung mit ein
    (wenn die Schüler:innen während dem Ausfüllen ihre Einwilligung dazu geben).

    <!-- TODO: Try to add a QR Code for participation link (see https://www.nayuki.io/page/qr-code-generator-library). -->

    <div class="ms-2 me-2 mt-1 p-2 background-red">
      <strong>Teilnahmelink: </strong><a href="{{ object.track.ddm_path }}?class={{ object.external_id }}">{{ object.track.ddm_path }}?class={{ object.external_id }}</a>
    </div>
  </div>
</div>

<div class="mt-4 row">
  <h3>Statistiken & Reports</h3>

  <div class="col m-3 p-3 background-blue">
    <h4>Teilnahmeübersicht</h4>

    <table>
      <tbody>
      <tr>
        <td class="ps-3"><span class="pe-2">▪</span> Laufende Teilnahmen:</td>
        <td>{{ n_not_finished }}</td>
      </tr>
      <tr>
        <td class="ps-3"><span class="pe-2">▪</span> Abgeschlossene Teilnahmen:</td>
        <td>{{ n_finished }}</td>
      </tr>
      <tr>
        <td class="pt-2">Anzahl hochgeladene Datensätze</td>
        <td></td>
      </tr>

      {% for key, value in n_donations.items %}
      <tr>
        <td class="ps-3"><span class="pe-2">▪</span> {{ key }}:</td>
        <td>{{ value }}</td>
      </tr>
      {% endfor %}

      </tbody>
    </table>
  </div>

  <div class="col m-3 p-3 background-purple">
    <h4>Report</h4>

    <p>
      Mit dem untenstehenden Link rufen Sie den Klassenreport auf. Das Laden
      des Reports kann anschliessend einige Sekunden dauern - bitte aktualisieren
      Sie die Webseite während des Ladens nicht.
    </p>
    <p>
      Bitte beachten Sie ausserdem, dass die Reports erst angezeigt werden,
      wenn mindestens 5 Personen einer Gruppe am Modul teilgenommen haben.
    </p>

    <p><button><a href="{% url 'class_report' object.pk %}" target="_blank">Klassenreport >></a></button></p>
  </div>

</div>

{% endblock main_content %}
